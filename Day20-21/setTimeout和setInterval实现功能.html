<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>setTimeout和setInterval实现功能</title>
</head>

<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>

    <script>
        var btn = document.getElementById("fade-btn");
        var obj = document.getElementById("fade-obj");
        var opacity = 1;

        function fade_out() {
            if (opacity > 0) {
                opacity -= 0.01;
                obj.style.opacity = opacity / 1;
                setTimeout(fade_out, 10);
            } else {
                btn.disabled = false;
                btn.innerHTML = "淡入";
                return;
            }
        };

        function fade_in() {
            if (opacity < 1) {
                opacity += 0.01;
                obj.style.opacity = opacity / 1;
                setTimeout(fade_in, 10);
            }
        }
        btn.onclick = function (e) {
            btn.disabled = true;
            if (opacity == 1) {
                fade_out();
            } else {
                fade_in();
            }
            console.log(opacity);
        }
    </script>
</body>

</html>